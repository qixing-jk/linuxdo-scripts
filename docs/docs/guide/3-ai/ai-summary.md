# AI 总结功能

> 由于系统按键与 Discourse 论坛快捷键存在冲突，所以 `-` 键位会失效，无法在输入框中输入，我在插件中做了兼容性处理，需使用 `alt` + `-` 组合键就可以输出 `-` 符号。

使用前需在设置中预先配置 API key 等相关信息。请注意：
- 不支持通过 HTTP 网址直接调用
- 提供自动和手动两种触发方式

如遇报错情况，请按以下步骤排查：
1. 确认第三方 API 服务连通性正常
2. 验证当前配置的模型是否被支持

确认以上信息无误后，如问题仍未解决，可通过 Issues 提交反馈。


## 使用说明

请严格按照指定格式进行配置：
- 目前暂不支持官方 Gemini 标准格式
- 兼容 OpenAI 格式的 API 接口

在配置面板中开启后即可使用 AI 总结功能，详细位置如下：

![](https://imgurl.zishu.me/2025/10/1761552607194.webp)

### 1. OpenAI 配置

```shell
sk-xxxxxxxxxxxxxxxxxx # API Key (密钥)
https://api.openai.com/v1/chat/completions # 接口路径
gpt-4o-mini # 模型名称
```

> 注意：如果是火山方舟的 DeepSeek 模型，也请使用 OpenAI 兼容的 API 格式 `https://api.volcengine.com/v1/chat/completions`。

### 2. DeepSeek 配置

```shell
sk-xxxxxxxxxxxxxxxxxx # API Key (密钥)
https://api.deepseek.com/v1/chat/completions # 接口路径
deepseek-chat # 模型名称
```

重要说明：
- 必须使用 OpenAI 兼容的 API 接口格式
- 其他配置参数与标准 DeepSeek 模型保持一致

## 温度 temperature

`temperature` 参数默认为 0.7，比较适合总结。当然你也可以设置 0-2 其他温度，但并不保证总结的效果。

特殊情况下可选择取消温度请求，比如模型为 `deepseek-reasoner`，不支持该参数。

## AI 总结全部回帖

总结所有**已加载**的主贴以及回帖，需要手动触发，不受 checkbox "是否显示手动总结按钮" 的影响，使用时请注意 token 消耗。

## 提示词 Prompt 

1. AI 总结主贴：
> 根据以下帖子内容进行总结，请使用 markdown 格式返回回答，没有字数限制，但要求文字精炼，简介准确，语言要求返回简体中文，并且进行中英文混排优化。可以通过编号列表（1，2，3）列出核心要点。注意不要输出标题，例如：核心要点总结，帖子总结等，直接输出文本段落。

2. AI 总结全部回帖
> 我会输入一论坛的主贴及所有回复，你需要输出：1.主贴总结：简要概括主贴核心内容 (2-3 句)，2. 讨论分析：主要观点倾向和共识/分歧点，讨论氛围评估 3.代表性回复：引用几条有代表性的回复 (附用户名)，简述每条回复的代表性和价值 4.争议点标记：标记格式：⚠️ [用户名]: "引用内容"，简析争议原因和各方立场 5.简要评估：评估讨论的整体氛围（如：友善、学术性、对抗性等）注意：保持客观公正，注重实质内容分析，区分事实与观点'

3. AI 生成回复：
> 根据以下帖子内容，帮我给作者写一条回复，简短，表明我的观点，用口语回复，不需要很正式。您可以通过讨论的方式进行回复，这将有助于引导其他用户或作者进行互动。

4. AI 生成标题：
> 根据以下帖子内容，生成一个合适的标题用于社交论坛发布使用，格式要求：不要书名号或其他符号，只需要一句纯文本。尽量精简到 15 字以内，如果字数不够表达主题，可以适当多生成几个字。
